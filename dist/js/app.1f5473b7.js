(function(e){function t(t){for(var r,s,o=t[0],l=t[1],c=t[2],d=0,u=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&u.push(a[s][0]),a[s]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);h&&h(t);while(u.length)u.shift()();return n.push.apply(n,c||[]),i()}function i(){for(var e,t=0;t<n.length;t++){for(var i=n[t],r=!0,o=1;o<i.length;o++){var l=i[o];0!==a[l]&&(r=!1)}r&&(n.splice(t--,1),e=s(s.s=i[0]))}return e}var r={},a={app:0},n=[];function s(t){if(r[t])return r[t].exports;var i=r[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=e,s.c=r,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(i,r,function(t){return e[t]}.bind(null,r));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/ThreeJsModelViewer/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var h=l;n.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"179e":function(e,t,i){},"2d09":function(e,t,i){},"3abb":function(e,t,i){var r={"./models/体育场/体育场.glb":"a5f4","./models/别墅/别墅.glb":"6e2c","./models/办公大楼/办公大楼.glb":"3d73","./models/卡车/卡车.glb":"7638","./models/操作台/操作台.glb":"4232","./models/文字特效/文字特效.glb":"a2a4","./models/沙滩/沙滩.glb":"fc33","./models/高楼/高楼.glb":"a48c"};function a(e){var t=n(e);return i(t)}function n(e){if(!i.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=n,e.exports=a,a.id="3abb"},"3c5f":function(e,t,i){"use strict";i("179e")},"3d73":function(e,t){throw new Error("Module parse failed: Unexpected character '' (1:4)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n(Source code omitted for this binary file)")},4232:function(e,t){throw new Error("Module parse failed: Unexpected character '' (1:4)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n(Source code omitted for this binary file)")},"56d7":function(e,t,i){"use strict";i.r(t);i("e623"),i("e379"),i("5dc8"),i("37e1");var r=i("2b0e"),a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("router-view")},n=[],s=i("2877"),o={},l=Object(s["a"])(o,a,n,!1,null,null,null),c=l.exports,h=(i("202f"),i("dfae")),d=i("0c63"),u=i("a600"),p=i("55f1"),m=i("160c"),g=i("fbdf"),f=i("9a63"),y=i("e32c"),v=i("cdeb"),w=i("f2ca"),b=i("f64c"),L=i("8c4f"),H=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"home"},[i("div",{staticClass:"modelList"},[i("a-card",{attrs:{title:"模型查看器展示"}},e._l(e.modellist,(function(t){return i("a-card-grid",{key:t.id,staticClass:"model",staticStyle:{width:"25%","text-align":"center",padding:"5px"}},[i("div",{staticClass:"image",on:{click:function(i){return e.renderModel(t)}}},[i("img",{attrs:{alt:"example",src:t.imgUrl}})]),i("a-card-meta",{attrs:{title:t.fileData.resourceName}},[i("template",{slot:"description"},[i("div",{staticClass:"modelDownload",on:{click:function(i){return e.download(t.modeldownLoadUrl)}}},[e._v(" "+e._s(t.modeldownLoadUrl)+" ")])])],2)],1)})),1)],1),e.modalViewerFlag?i("modelviewer",{ref:"modelviewerCom",attrs:{model:e.model},on:{close:e.closemodelViewer}}):e._e()],1)},x=[],S=(i("d3b7"),i("ddb0"),i("4160"),i("159b"),i("baa5"),i("ac1f"),i("1276"),i("99af"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"modelviewer"},[i("div",{staticClass:"centent"},[i("div",{ref:"modelviewerMain",staticClass:"main"},[i("div",{staticClass:"toolMenu"},[i("div",{staticClass:"header"},[i("div",{staticClass:"header_left"},[e.model?i("div",{staticClass:"header_left_title"},[e._v(" "+e._s(e.model.fileData.resourceName)+" - ")]):e._e(),i("div",{staticClass:"header_left_text"},[e._v("3D 查看器")])]),i("div",{staticClass:"header_right"},[i("a-icon",{staticClass:"header_right_icon",attrs:{type:"zoom-in"},on:{click:function(){e.console.log("全屏")}}}),i("a-icon",{staticClass:"header_right_icon",attrs:{type:"close"},on:{click:e.closeModal}})],1)]),i("div",{staticClass:"tools"},e._l(e.toolMenu,(function(t){return i("div",{key:t.id,staticClass:"tool"},[i("a-dropdown",{attrs:{trigger:["click"],overlayClassName:"overlayClassName"}},[i("span",{staticClass:"toolTitle"},[e._v(e._s(t.name))]),i("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},e._l(t.children,(function(t){return i("a-menu-item",{key:t.id},[i("span",{staticClass:"toolTitle"},[i("a-icon",{attrs:{type:t.icon}}),e._v(" "+e._s(t.name)+" ")],1)])})),1)],1)],1)})),0)]),i("div",{staticClass:"view",staticStyle:{display:"flex"}},[e.getUIHelperFlag("toolUI","modelChildListHelper")?i("div",{staticClass:"childList"},[e._v(" 子集 ")]):e._e(),i("div",{staticClass:"iframebox",attrs:{id:"ModelViewerBox"}},[e.modelLoader_show?i("div",{staticClass:"progress"},[i("a-progress",{attrs:{type:"circle",percent:e.modelLoader_progress},scopedSlots:e._u([{key:"format",fn:function(t){return[i("div",{staticStyle:{color:"rgb(42, 74, 218)","margin-bottom":"10px"}},[e._v(" 模型加载中…… ")]),i("div",{staticStyle:{color:"rgb(42, 74, 218)"}},[e._v(e._s(t)+"%")])]}}],null,!1,1728773324)})],1):e._e()]),i("div",{staticClass:"rightMenu",style:{height:e.rightMenuHeight+"px"}},[i("a-collapse",{model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[i("a-collapse-panel",{attrs:{header:e.rightMenu.environmentUI.name}},[i("a-row",e._l(e.rightMenu.environmentUI.datalist,(function(e){return i("a-col",{key:e.id,attrs:{span:8}},[i("div",{staticClass:"colorBox",staticStyle:{width:"40px",height:"40px"},style:{backgroundColor:e.color}})])})),1)],1),i("a-collapse-panel",{attrs:{header:e.rightMenu.ligntUI.name}},[i("div",{staticClass:"lightSet"},e._l(e.rightMenu.ligntUI.childrenUI,(function(t){return i("div",{key:t.id,staticClass:"helperItem",class:t.id},[i("span",[e._v(e._s(t.name))]),i("a-switch",{attrs:{"checked-children":"开","un-checked-children":"关",defaultChecked:t.status},on:{change:function(i){return e.lightUIApi(t)}}})],1)})),0)]),i("a-collapse-panel",{attrs:{header:e.rightMenu.sceneUI.name}},[i("div",{staticClass:"sceneSet"},e._l(e.rightMenu.sceneUI.childrenUI,(function(t){return i("div",{key:t.id,staticClass:"helperItem",class:t.id},[i("span",[e._v(e._s(t.name))]),i("a-switch",{attrs:{"checked-children":"开","un-checked-children":"关",defaultChecked:t.status},on:{change:function(i){return e.sceneUIApi(t)}}})],1)})),0)]),i("a-collapse-panel",{attrs:{header:e.rightMenu.toolUI.name}},[i("div",{staticClass:"toolSet"},e._l(e.rightMenu.toolUI.childrenUI,(function(t){return i("div",{key:t.id,staticClass:"helperItem",class:t.id},[i("span",[e._v(e._s(t.name))]),i("a-switch",{attrs:{"checked-children":"开","un-checked-children":"关",defaultChecked:t.status},on:{change:function(i){return e.toolUIApi(t)}}})],1)})),0)])],1)],1)]),i("div",{staticClass:"footer"},[i("div",{staticClass:"animation"},[i("div",{staticClass:"play animationBtn"},[i("a-icon",{attrs:{type:"play-square"}})],1),i("div",{staticClass:"play animationBtn"},[i("a-icon",{attrs:{type:"sync"}})],1),i("div",{staticClass:"animationLine"},[i("a-slider",{attrs:{id:"test","default-value":30,disabled:!1}})],1)]),i("div",{staticClass:"tool"},[i("a-dropdown",{attrs:{trigger:["click"],overlayClassName:"overlayClassName"}},[i("span",{staticClass:"toolTitle"},[i("a-icon",{attrs:{type:"up-square"}}),e._v(" 快速动画"),i("a-icon",{attrs:{type:"up"}})],1),i("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[i("a-menu-item",[i("span",{staticClass:"toolTitle"},[i("a-icon",{attrs:{type:"desktop"}}),e._v(" 无 ")],1)]),i("a-menu-item",[i("span",{staticClass:"toolTitle"},[i("a-icon",{attrs:{type:"desktop"}}),e._v(" 转盘 ")],1)])],1)],1),i("a-dropdown",{attrs:{trigger:["click"],overlayClassName:"overlayClassName"}},[i("span",{staticClass:"toolTitle"},[i("a-icon",{staticStyle:{"font-size":"10px"},attrs:{type:"close"}}),e._v(" 1.0"),i("a-icon",{attrs:{type:"up"}})],1),i("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[i("a-menu-item",[i("span",{staticClass:"toolTitle"},[i("a-icon",{staticStyle:{"font-size":"10px"},attrs:{type:"close"}}),e._v(" 1.0 ")],1)]),i("a-menu-item",[i("span",{staticClass:"toolTitle"},[i("a-icon",{staticStyle:{"font-size":"10px"},attrs:{type:"close"}}),e._v(" 2.0 ")],1)])],1)],1)],1)])])])])}),_=[],k=i("1da1"),R=(i("7db0"),i("96cf"),i("d4ec")),M=i("bee2"),A=(i("c0b6"),i("b0c0"),i("5a89")),D=i("4721"),C=i("aea1"),U=i("257e"),j=i("262e"),I=i("2caf"),X=(i("cb29"),function(e){Object(j["a"])(i,e);var t=Object(I["a"])(i);function i(e,r){var a;Object(R["a"])(this,i),a=t.call(this),a.container=r,a.editorCamera=e,a.point=new A["Sb"],a.dim=128,a.raycaster=new A["zb"],a.mouse=new A["Rb"],a.sceneOrtho=new A["Bb"],a.rendererOrtho=new A["Ub"]({antialias:!0,alpha:!0}),a.rendererOrtho.setSize(128,128);var n=document.createElement("div");n.id="viewHelper",n.style.position="absolute",n.style.right="0px",n.style.bottom="0px",n.style.height="128px",n.style.width="128px",n.addEventListener("mouseup",(function(e){e.stopPropagation(),e.preventDefault(),a.handleClick(e)})),n.addEventListener("mousedown",(function(e){e.stopPropagation()})),n.appendChild(a.rendererOrtho.domElement),r.appendChild(n),a.panel=n;var s=new A["hb"];s.name="view_helper";var o=new A["l"]("#ff3653"),l=new A["l"]("#8adb00"),c=new A["l"]("#2c8fff"),h=[],d=4,u=4,p=new A["jb"](-d/2,d/2,u/2,-u/2,-4,4);p.position.set(0,0,0),p.lookAt(0,0,0),a.camera=p;var m=new A["f"](.8,.05,.05).translate(.4,0,0),g=new A["X"](m,O(o)),f=new A["X"](m,O(l)),y=new A["X"](m,O(c));f.rotation.z=Math.PI/2,y.rotation.y=-Math.PI/2,console.log(Object(U["a"])(a),"this"),s.add(g),s.add(y),s.add(f);var v=new A["Jb"](Z(o,"X"));v.userData.type="posX";var w=new A["Jb"](Z(l,"Y"));w.userData.type="posY";var b=new A["Jb"](Z(c,"Z"));b.userData.type="posZ";var L=new A["Jb"](Z(o));L.userData.type="negX";var H=new A["Jb"](Z(l));H.userData.type="negY";var x=new A["Jb"](Z(c));return x.userData.type="negZ",v.position.x=1,w.position.y=1,b.position.z=1,L.position.x=-1,L.scale.setScalar(.8),H.position.y=-1,H.scale.setScalar(.8),x.position.z=-1,x.scale.setScalar(.8),s.add(v),s.add(w),s.add(b),s.add(L),s.add(H),s.add(x),h.push(v),h.push(w),h.push(b),h.push(L),h.push(H),h.push(x),a.posXAxisHelper=v,a.posYAxisHelper=w,a.posZAxisHelper=b,a.negXAxisHelper=L,a.negYAxisHelper=H,a.negZAxisHelper=x,a.interactiveObjects=h,a.sceneOrtho.add(s),a}return Object(M["a"])(i,[{key:"render",value:function(e,t,i){this.quaternion.copy(this.editorCamera.quaternion).invert(),this.updateMatrixWorld();var r=this.point;r.set(0,0,1),r.applyQuaternion(this.editorCamera.quaternion),r.x>=0?(this.posXAxisHelper.material.opacity=1,this.negXAxisHelper.material.opacity=.5):(this.posXAxisHelper.material.opacity=.5,this.negXAxisHelper.material.opacity=1),r.y>=0?(this.posYAxisHelper.material.opacity=1,this.negYAxisHelper.material.opacity=.5):(this.posYAxisHelper.material.opacity=.5,this.negYAxisHelper.material.opacity=1),r.z>=0?(this.posZAxisHelper.material.opacity=1,this.negZAxisHelper.material.opacity=.5):(this.posZAxisHelper.material.opacity=.5,this.negZAxisHelper.material.opacity=1),this.camera.position.set[0],this.camera.quaternion.copy(i.quaternion),this.rendererOrtho.render(this.sceneOrtho,this.camera)}},{key:"handleClick",value:function(e){this.mouse.x=e.offsetX/this.dim*2-1,this.mouse.y=-e.offsetY/this.dim*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);var t=this.raycaster.intersectObjects(this.interactiveObjects);if(0!==t.length)switch(t[0].object.userData.type){case"posX":console.log("posX");break;case"posY":break;case"posZ":break;case"negX":break;case"negY":break;case"negZ":break;default:console.error("ViewHelper: Invalid axis.")}}}]),i}(A["hb"]));function O(e){return new A["Y"]({color:e,toneMapped:!1})}function Z(e,t){var i=document.createElement("canvas");i.width=64,i.height=64;var r=i.getContext("2d");r.beginPath(),r.arc(32,32,16,0,2*Math.PI),r.closePath(),r.fillStyle=e.getStyle(),r.fill(),t&&(r.font="24px Arial",r.textAlign="center",r.fillStyle="#000000",r.fillText(t,32,41));var a=new A["j"](i);return new A["Kb"]({map:a,toneMapped:!1})}i("3ca3"),i("2b3d"),i("9861"),i("e323"),i("c975"),i("d401"),i("81b2"),i("0eb6"),i("b7ef"),i("8bd4"),i("9257"),i("ace4"),i("5cc6"),i("907a"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),i("9129"),i("a9e3"),i("b680"),i("e25e"),i("a15b"),i("0d03"),i("c19f"),i("e9c4"),i("0dc0"),i("9e5c");var K=i("e642"),z=i("db27"),E=i("4086"),N=i("34ad"),P=(i("b1f1"),void 0);var Y=function(e){return Number.isNaN(e)?"EMPTY":e<1024?e+"b":e<1048576?(e/1024).toFixed(1)+"k":e<1073741824?(e/1024/1024).toFixed(1)+"M":(e/1024/1024/1024).toFixed(1)+"G"},F=function(e,t){return new Promise(function(){var i=Object(k["a"])(regeneratorRuntime.mark((function i(r){var a,n,s,o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!e.fileData.resourceType||"glb"!==e.fileData.resourceType){i.next=12;break}return i.next=3,q({modelUrl:"".concat(e.fileData.modelUrl,"/"),fileName:e.fileData.resourceName},t);case 3:if(a=i.sent,a.status){i.next=7;break}return r({message:"加载失败",status:!1}),i.abrupt("return");case 7:return a.object.scene.name=e.fileData.resourceName,r({status:!0,object:a.object.scene}),i.abrupt("return");case 12:if(1!==e.fileData.type.length||"obj"!==e.fileData.type[0]){i.next=24;break}return i.next=15,V({modelUrl:"".concat(e.fileData.modelUrl,"/"),fileName:e.fileData.resourceName},t);case 15:if(n=i.sent,n.status){i.next=19;break}return r({message:"加载失败",status:!1}),i.abrupt("return");case 19:return n.object.name=e.fileData.resourceName,r({status:!0,object:n.object}),i.abrupt("return");case 24:if(2!==e.fileData.type.length||"obj"!==e.fileData.type[0]){i.next=36;break}return i.next=27,T({modelUrl:"".concat(e.fileData.modelUrl,"/"),fileName:e.fileData.resourceName},t);case 27:if(s=i.sent,s.status){i.next=31;break}return r({message:"加载失败",status:!1}),i.abrupt("return");case 31:return s.object.name=e.fileData.resourceName,r({status:!0,object:s.object}),i.abrupt("return");case 36:if("gltf"!==e.fileData.type[0]){i.next=49;break}return i.next=39,$({modelUrl:"".concat(e.fileData.modelUrl,"/"),fileName:e.fileData.resourceName},t);case 39:if(o=i.sent,o.status){i.next=44;break}return P.$message.error("加载失败"),r({message:"加载失败",status:!1}),i.abrupt("return");case 44:return o.object.scene.name=e.fileData.resourceName,r({status:!0,object:o.object.scene}),i.abrupt("return");case 49:return console.log("暂不支持"),r({message:"暂不支持",status:!1}),i.abrupt("return");case 52:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}())},T=function(e,t){return new Promise(function(){var i=Object(k["a"])(regeneratorRuntime.mark((function i(r){var a,n,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:a=new A["R"](t),n=function(){r({message:"加载模型失败",status:!1})},s=function(e){var i=parseInt(e.loaded/e.total*100),r=Y(e.total);t({per:i,modelSize:r})},a.addHandler(/\.dds$/i,new z["a"]),new E["a"](a).load("".concat(e.modelUrl).concat(e.fileName,".mtl"),(function(t){t.preload(),new K["a"](a).setMaterials(t).load("".concat(e.modelUrl).concat(e.fileName,".obj"),function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r({message:"加载模型成功",status:!0,object:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s,n)}));case 5:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}())},V=function(e,t){return new Promise(function(){var i=Object(k["a"])(regeneratorRuntime.mark((function i(r){var a,n,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:a=new A["R"](t),n=function(){r({message:"加载模型失败",status:!1})},s=function(e){var i=parseInt(e.loaded/e.total*100),r=Y(e.total);t({per:i,modelSize:r})},a.addHandler(/\.dds$/i,new z["a"]),new K["a"](a).load("".concat(e.modelUrl).concat(e.fileName,".obj"),function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r({message:"加载模型成功",status:!0,object:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s,n);case 5:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}())},$=function(e,t){return new Promise(function(){var i=Object(k["a"])(regeneratorRuntime.mark((function i(r){var a,n,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:a=new A["R"](t),n=function(){r({message:"加载模型失败",status:!1})},s=function(e){var i=parseInt(e.loaded/e.total*100),r=Y(e.total);t({per:i,modelSize:r})},a.addHandler(/\.dds$/i,new z["a"]),new N["a"](a).load("".concat(e.modelUrl).concat(e.fileName,".gltf"),function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r({message:"加载模型成功",status:!0,object:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s,n);case 5:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}())},q=function(e,t){return new Promise(function(){var i=Object(k["a"])(regeneratorRuntime.mark((function i(r){var a,n,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:a=new A["R"],n=function(){r({message:"加载模型失败",status:!1})},s=function(e){console.log(e,"加载模型");var i=parseInt(e.loaded/e.total*100),r=Y(e.total);t({per:i,modelSize:r})},a.addHandler(/\.dds$/i,new z["a"]),new N["a"](a).load("".concat(e.modelUrl).concat(e.fileName,".glb"),function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r({message:"加载模型成功",status:!0,object:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s,n);case 5:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}())},B=function(){function e(t){Object(R["a"])(this,e),this.container=null,this.parantDom=null,this.scene=null,this.camera=null,this.renderer=null,this.orbitcontrols=null,this.gridHelper=null,this.viewHelper=null,this.planeHelper=null,this.model=null,this.modelSize=null,this.modelLabel=null,this.LightHelper={HemisphereLightHelper:null,SpotLightHelper:null,SpotLightshadowCameraHelper:null,DirectionalLightHelper_XZ:null,DirectionalLightHelper_XRZ:null,DirectionalLightHelper_RXZ:null,DirectionalLightHelper_RXRZ:null},this.Keylight={SpotLight:null},this.AuxiliaryLight={AmbientLight:null,HemisphereLight:null,DirectionalLight_XZ:null,DirectionalLight_XRZ:null,DirectionalLight_RXZ:null,DirectionalLight_RXRZ:null},this.rightMenu=t}return Object(M["a"])(e,[{key:"init",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,i,r){var a,n,s,o,l,c,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.createContainer(t),this.createScene(),this.createCamera(),this.createRenderer(),this.createOrbitcontrols(),e.next=7,this.addModel(i,r);case 7:e.sent,a=this.rightMenu.ligntUI.childrenUI.find((function(e){return"AuxiliaryLight"===e.id})).status,a&&this.createAuxiliaryLight(),n=this.rightMenu.ligntUI.childrenUI.find((function(e){return"Keylight"===e.id})).status,n&&this.createKeylight(),s=this.rightMenu.ligntUI.childrenUI.find((function(e){return"LightHelper"===e.id})).status,s&&this.createLightHelper(),o=this.rightMenu.ligntUI.childrenUI.find((function(e){return"Shadow"===e.id})).status,o&&this.LightShadow(!0),l=this.rightMenu.sceneUI.childrenUI.find((function(e){return"gridHelper"===e.id})).status,l&&this.createGridHelper(),c=this.rightMenu.sceneUI.childrenUI.find((function(e){return"viewHelper"===e.id})).status,c&&this.createViewHelper(),h=this.rightMenu.sceneUI.childrenUI.find((function(e){return"planeHelper"===e.id})).status,h&&this.createPlaneHelper(),window.scene=this.scene,this.animate(),this.onWindowResize(),window.addEventListener("resize",this.onWindowResize.bind(this),!1);case 26:case"end":return e.stop()}}),e,this)})));function t(t,i,r){return e.apply(this,arguments)}return t}()},{key:"remove",value:function(){console.log("移除画布");var e=document.getElementsByClassName("view")[0];e.removeChild(document.getElementById("ModelViewerBox"))}},{key:"createContainer",value:function(e){this.container=document.createElement("div"),this.container.globalAlpha=0,this.parantDom=document.querySelector("".concat(e));var t=this.parantDom.lastElementChild;while(t)this.parantDom.removeChild(t),t=this.parantDom.lastElementChild;this.parantDom.appendChild(this.container)}},{key:"createScene",value:function(){this.scene=new A["Bb"],this.scene.background=new A["l"](2171696)}},{key:"createCamera",value:function(){var e=this.parantDom.clientWidth/this.parantDom.clientHeight;this.camera=new A["lb"](50,e,1,3e4),this.camera.position.set(100,100,100),this.camera.name="Camera",this.camera.lookAt(new A["Sb"](100,100,100))}},{key:"createRenderer",value:function(){this.renderer=new A["Ub"]({antialias:!0,alpha:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.parantDom.offsetWidth,this.parantDom.offsetHeight),this.container.appendChild(this.renderer.domElement),this.renderer.shadowMapEnabled=!0,this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=A["kb"],this.renderer.render(this.scene,this.camera),this.labelRenderer=new C["b"],this.labelRenderer.setSize(this.parantDom.offsetWidth,this.parantDom.offsetHeight),this.labelRenderer.domElement.style.position="absolute",this.labelRenderer.domElement.style.top="0px",this.container.appendChild(this.labelRenderer.domElement)}},{key:"createOrbitcontrols",value:function(){this.orbitcontrols=new D["a"](this.camera,this.labelRenderer.domElement),this.orbitcontrols.addEventListener("change",this.render.bind(this)),this.orbitcontrols.update()}},{key:"createViewHelper",value:function(){this.viewHelper=new X(this.camera,this.container),this.scene.add(this.viewHelper)}},{key:"removeViewHelper",value:function(){this.scene.remove(this.viewHelper),this.render();var e=document.getElementById("viewHelper");e.remove()}},{key:"createGridHelper",value:function(){this.gridHelper=new A["y"](300,100,4476262,2896450),this.gridHelper.position.set(0,0,-2),this.scene.add(this.gridHelper);var e=this.rightMenu.ligntUI.childrenUI.find((function(e){return"Shadow"===e.id})).status;e&&this.LightShadow(!0)}},{key:"removeGridHelper",value:function(){this.scene.remove(this.gridHelper)}},{key:"createPlaneHelper",value:function(){var e=new A["f"](300,1,300),t=new A["Z"]({color:4476262,side:A["r"]});this.planeHelper=new A["X"](e,t),this.planeHelper.position.set(0,-1,0),this.scene.add(this.planeHelper);var i=this.rightMenu.ligntUI.childrenUI.find((function(e){return"Shadow"===e.id})).status;i&&this.LightShadow(!0)}},{key:"removePlaneHelper",value:function(){this.scene.remove(this.planeHelper)}},{key:"addModel",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,i){var r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(a){var n,s,o,l,c,h,d,u,p,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r.model&&r.removeModel(),e.next=3,F(t,i);case 3:if(n=e.sent,n.status){e.next=7;break}return a({message:n.message,status:!1}),e.abrupt("return");case 7:if(n.object){e.next=11;break}return console.log("读取模型失败"),a({message:"读取模型失败",status:!1}),e.abrupt("return");case 11:r.model=n.object,s=(new A["d"]).setFromObject(r.model),o=s.max.x-s.min.x,l=s.max.y-s.min.y,c=s.max.z-s.min.z,h=s.min.x+o/2,d=0,u=s.min.z+c/2,r.model.position.set(-h,-d,-u),p=(o>c?o:c)>l?o>c?o:c:l,r.camera.updateProjectionMatrix(),r.cameraReset({x:p,y:l,z:p}),r.modelSize={x:p,y:l,z:p},r.scene.add(r.model),m=document.createElement("div"),m.className="label",m.style="color:#fff",m.textContent=r.model.name,r.modelLabel=new C["a"](m),r.modelLabel.position.set(0,l+1.5,0),r.model.add(r.modelLabel),a({message:"加载成功",status:!0});case 33:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));function t(t,i){return e.apply(this,arguments)}return t}()},{key:"removeModel",value:function(){this.model.remove(this.modelLabel),this.scene.remove(this.model)}},{key:"createLightHelper",value:function(){this.AuxiliaryLight.HemisphereLight&&(this.LightHelper.HemisphereLightHelper=new A["B"](this.AuxiliaryLight.HemisphereLight,5),this.scene.add(this.LightHelper.HemisphereLightHelper),this.LightHelper.DirectionalLightHelper_XZ=new A["q"](this.AuxiliaryLight.DirectionalLight_XZ,5),this.scene.add(this.LightHelper.DirectionalLightHelper_XZ),this.LightHelper.DirectionalLightHelper_XRZ=new A["q"](this.AuxiliaryLight.DirectionalLight_XRZ,5),this.scene.add(this.LightHelper.DirectionalLightHelper_XRZ),this.LightHelper.DirectionalLightHelper_RXZ=new A["q"](this.AuxiliaryLight.DirectionalLight_RXZ,5),this.scene.add(this.LightHelper.DirectionalLightHelper_RXZ),this.LightHelper.DirectionalLightHelper_RXRZ=new A["q"](this.AuxiliaryLight.DirectionalLight_RXRZ,5),this.scene.add(this.LightHelper.DirectionalLightHelper_RXRZ)),this.Keylight.SpotLight&&(this.LightHelper.SpotLightHelper=new A["Ib"](this.Keylight.SpotLight),this.scene.add(this.LightHelper.SpotLightHelper),this.LightHelper.SpotLightshadowCameraHelper=new A["i"](this.Keylight.SpotLight.shadow.camera),this.LightHelper.SpotLightshadowCameraHelper.visible=!0,this.scene.add(this.LightHelper.SpotLightshadowCameraHelper))}},{key:"removeLightHelper",value:function(){this.LightHelper.HemisphereLightHelper&&this.scene.remove(this.LightHelper.HemisphereLightHelper),this.LightHelper.SpotLightHelper&&this.scene.remove(this.LightHelper.SpotLightHelper),this.LightHelper.SpotLightshadowCameraHelper&&this.scene.remove(this.LightHelper.SpotLightshadowCameraHelper),this.LightHelper.DirectionalLightHelper_XZ&&this.scene.remove(this.LightHelper.DirectionalLightHelper_XZ),this.LightHelper.DirectionalLightHelper_RXZ&&this.scene.remove(this.LightHelper.DirectionalLightHelper_RXZ),this.LightHelper.DirectionalLightHelper_XRZ&&this.scene.remove(this.LightHelper.DirectionalLightHelper_XRZ),this.LightHelper.DirectionalLightHelper_RXRZ&&this.scene.remove(this.LightHelper.DirectionalLightHelper_RXRZ)}},{key:"createAuxiliaryLight",value:function(){this.AuxiliaryLight.AmbientLight=new A["a"](6710886,1),this.AuxiliaryLight.HemisphereLight=new A["A"](16777215,0,.1),this.AuxiliaryLight.DirectionalLight_XZ=new A["p"](16777215,.05),this.AuxiliaryLight.DirectionalLight_XRZ=new A["p"](16777215,.05),this.AuxiliaryLight.DirectionalLight_RXZ=new A["p"](16777215,.05),this.AuxiliaryLight.DirectionalLight_RXRZ=new A["p"](16777215,.05),this.updateLight();var e=this.rightMenu.ligntUI.childrenUI.find((function(e){return"Shadow"===e.id})).status;e&&this.LightShadow(!0),this.scene.add(this.AuxiliaryLight.AmbientLight),this.scene.add(this.AuxiliaryLight.HemisphereLight),this.scene.add(this.AuxiliaryLight.DirectionalLight_XZ),this.scene.add(this.AuxiliaryLight.DirectionalLight_XRZ),this.scene.add(this.AuxiliaryLight.DirectionalLight_RXZ),this.scene.add(this.AuxiliaryLight.DirectionalLight_RXRZ)}},{key:"removeAuxiliaryLight",value:function(){this.scene.remove(this.AuxiliaryLight.AmbientLight),this.scene.remove(this.AuxiliaryLight.HemisphereLight)}},{key:"createKeylight",value:function(){this.Keylight.SpotLight=new A["Hb"](16777215),this.Keylight.SpotLight.position.set(17,45,27),this.Keylight.SpotLight.castShadow=!0,this.Keylight.SpotLight.intensity=2.5,this.Keylight.SpotLight.angle=Math.PI/4,this.Keylight.SpotLight.distance=1e3,this.Keylight.SpotLight.exponent=1,this.Keylight.SpotLight.decay=1.5,this.Keylight.SpotLight.penumbra=.7,this.updateLight();var e=this.rightMenu.ligntUI.childrenUI.find((function(e){return"Shadow"===e.id})).status;e&&this.LightShadow(!0),this.scene.add(this.Keylight.SpotLight)}},{key:"removeKeylight",value:function(){this.scene.remove(this.Keylight.SpotLight),this.scene.remove(this.Keylight.DirectionalLight)}},{key:"updateLight",value:function(e){var t=this.modelSize?1*this.modelSize.x:0,i=this.modelSize?1*this.modelSize.y:0,r=this.modelSize?1*this.modelSize.z:0;this.AuxiliaryLight&&(this.AuxiliaryLight.AmbientLight.position.set(0,1.5*i,0),this.AuxiliaryLight.HemisphereLight.position.set(0,1.5*i,0),this.AuxiliaryLight.DirectionalLight_XZ.position.set(1.5*t,.35*i,1.5*r),this.AuxiliaryLight.DirectionalLight_XRZ.position.set(1.5*t,.35*i,1.5*-r),this.AuxiliaryLight.DirectionalLight_RXZ.position.set(1.5*-t,.35*i,1.5*r),this.AuxiliaryLight.DirectionalLight_RXRZ.position.set(1.5*-t,.35*i,1.5*-r)),this.Keylight.SpotLight&&(this.Keylight.SpotLight.position.set(t?t+40:17,i?5*i:45,r?r+40:27),this.Keylight.SpotLight.target=this.model)}},{key:"LightShadow",value:function(e){var t=!!e;console.log(t,t?"开启阴影":"关闭阴影"),this.Keylight.SpotLight&&(console.log(t,"主灯光阴影"),this.Keylight.SpotLight.castShadow=t,this.Keylight.SpotLight.receiveShadow=t,this.Keylight.SpotLight.shadow.mapSize.width=512,this.Keylight.SpotLight.shadow.mapSize.height=512,this.Keylight.SpotLight.shadow.radius=1,this.Keylight.SpotLight.shadow.camera.near=20,this.Keylight.SpotLight.shadow.camera.far=5e4,this.Keylight.SpotLight.shadow.fov=10,this.Keylight.SpotLight.shadow.focus=1);var i=function e(i){i.children&&i.children.forEach((function(i){"Mesh"===i.type&&(i.castShadow=t),i.children&&i.children.length>0&&e(i)}))};this.model&&i(this.model),this.planeHelper&&(console.log(t,"planeHelper阴影"),this.planeHelper.receiveShadow=t),this.gridHelper&&(console.log(t,"gridHelper阴影"),this.gridHelper.receiveShadow=t)}},{key:"render",value:function(){this.renderer.clear(),this.renderer.render(this.scene,this.camera),this.viewHelper&&this.viewHelper.render(this.renderer,this.scene,this.camera),this.labelRenderer.render(this.scene,this.camera)}},{key:"cameraReset",value:function(e){this.camera.position.set(e.x,e.y,e.z),this.orbitcontrols.target.set(0,0,0),this.orbitcontrols.update(),this.animate()}},{key:"onWindowResize",value:function(){console.log(this.parantDom,111),this.camera.aspect=this.parantDom.offsetWidth/this.parantDom.offsetHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.parantDom.offsetWidth,this.parantDom.offsetHeight)}},{key:"animate",value:function(){requestAnimationFrame(this.animate.bind(this)),this.render()}}]),e}(),J={name:"Modelviewer",props:["model"],data:function(){return{visible:!0,modelLoader_progress:0,modelLoader_show:!1,modelLoader_text:"",toolMenu:[{id:"file",name:"文件",children:[{id:"export",name:"导出",icon:"download"},{id:"screenshot",name:"截图",icon:"picture"}]},{id:"edit",name:"编辑",children:[{id:"disassemble",name:"拆解",icon:"unlock"}]},{id:"tool",name:"工具",children:[{id:"statistics",name:"统计信息",icon:"file-search"},{id:"sectioning",name:"剖切",icon:"to-top"}]},{id:"viewer",name:"查看",children:[{id:"blast",name:"爆炸",icon:"global"},{id:"measure",name:"测量",icon:"gateway"},{id:"ResetCamera",name:"重置相机",icon:"cloud-sync"}]}],rightMenu:{environmentUI:{name:"环境设置",datalist:[{id:1,color:"#ccc"},{id:2,color:"#FF4400"},{id:3,color:"#000000"},{id:4,color:"#FFF9AD"},{id:5,color:"#97C7C9"},{id:6,color:"#FF9000"}]},ligntUI:{id:"ligntUI",name:"灯光设置",childrenUI:[{id:"LightHelper",name:"灯光辅助器",status:!1},{id:"AuxiliaryLight",name:"辅助灯光",status:!0},{id:"Keylight",name:"主灯光",status:!0},{id:"Shadow",name:"阴影",status:!0}]},sceneUI:{id:"sceneUI",name:"场景控件",childrenUI:[{id:"gridHelper",name:"网格辅助",status:!1},{id:"viewHelper",name:"坐标辅助",status:!0},{id:"planeHelper",name:"平面辅助",status:!0}]},toolUI:{id:"toolUI",name:"工具控件",childrenUI:[{id:"modelChildListHelper",name:"模型层级",status:!1}]}},activeKey:[],RenderModelApi:null,rightMenuHeight:0}},watch:{activeKey:function(e){}},mounted:function(){var e=this;return Object(k["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.rightMenuHeight=e.$refs.modelviewerMain.clientHeight-80-50,e.RenderModelApi=new B(e.rightMenu),e.RenderModelApi.init("#ModelViewerBox",e.model,e.loaderModel);case 3:case"end":return t.stop()}}),t)})))()},methods:{loaderModel:function(e){console.log(e,"模型加载"),e&&(this.modelLoader_show=!0,this.modelLoader_progress=e.per,this.modelLoader_text="加载中…… 文件大小：".concat(e.modelSize),100===e.per&&(this.modelLoader_show=!1))},lightUIApi:function(e){console.log(e,"灯光设置"),e.status=!e.status,this.RenderModelApi.model?"LightHelper"!==e.id?"AuxiliaryLight"!==e.id?"Keylight"!==e.id?"Shadow"!==e.id||(e.status?this.RenderModelApi.LightShadow(!0):this.RenderModelApi.LightShadow(!1)):e.status?this.RenderModelApi.createKeylight():this.RenderModelApi.removeKeylight():e.status?this.RenderModelApi.createAuxiliaryLight():this.RenderModelApi.removeAuxiliaryLight():e.status?this.RenderModelApi.createLightHelper():this.RenderModelApi.removeLightHelper():this.$message.warning("请选择模型")},sceneUIApi:function(e){console.log(e,"场景设置"),e.status=!e.status,this.RenderModelApi.model?("gridHelper"===e.id&&(e.status?this.RenderModelApi.createGridHelper():this.RenderModelApi.removeGridHelper()),"viewHelper"===e.id&&(e.status?this.RenderModelApi.createViewHelper():this.RenderModelApi.removeViewHelper()),"planeHelper"===e.id&&(e.status?this.RenderModelApi.createPlaneHelper():this.RenderModelApi.removePlaneHelper())):this.$message.warning("请选择模型")},toolUIApi:function(e){console.log(e,"场景设置"),e.status=!e.status,e.id},getUIHelperFlag:function(e,t){return this.rightMenu[e].childrenUI.find((function(e){return e.id===t})).status},closeModal:function(){this.RenderModelApi.remove(),this.$emit("close")}}},W=J,G=(i("3c5f"),i("7f67"),Object(s["a"])(W,S,_,!1,null,"552f6db0",null)),Q=G.exports,ee={name:"home",data:function(){return{modalViewerFlag:!1,model:null,modellist:[]}},components:{modelviewer:Q},mounted:function(){var e=this,t=i("3abb").keys();t.forEach((function(t){var i=t.substring(t.lastIndexOf("/"),0),r=t.substring(t.lastIndexOf("/")+1).split(".")[0],a=t.substring(t.lastIndexOf("/")+1).split(".")[1];e.modellist.push({id:String(1e3*Math.random()),imgUrl:"".concat(i,"/index.png"),modeldownLoadUrl:"".concat(window.location.origin).concat(window.location.pathname).concat(t.substring(t.lastIndexOf("/"),1).substring(1),"/").concat(r,".").concat(a),fileData:{modelUrl:i,resourceType:a,resourceName:r,type:[a]}})})),console.log(t)},methods:{renderModel:function(e){this.modalViewerFlag=!0,this.model=e},download:function(e){window.open(e)},closemodelViewer:function(){this.modalViewerFlag=!1}}},te=ee,ie=(i("ee84"),Object(s["a"])(te,H,x,!1,null,"5c5d1871",null)),re=ie.exports;r["a"].use(L["a"]);var ae=[{path:"/",redirect:"/home"},{path:"/home",component:re,name:"Home",children:[]}],ne=new L["a"]({mode:"hash",routes:ae}),se=ne;r["a"].use(h["a"]),r["a"].use(d["a"]),r["a"].use(u["a"]),r["a"].use(p["a"]),r["a"].use(m["a"]),r["a"].use(g["a"]),r["a"].use(f["a"]),r["a"].use(y["a"]),r["a"].use(v["a"]),r["a"].use(w["a"]),r["a"].prototype.$message=b["a"],new r["a"]({router:se,render:function(e){return e(c)}}).$mount("#app")},"6e2c":function(e,t){throw new Error("Module parse failed: Unexpected character '' (1:4)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n(Source code omitted for this binary file)")},7638:function(e,t){throw new Error("Module parse failed: Unexpected character '' (1:4)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n(Source code omitted for this binary file)")},"7f67":function(e,t,i){"use strict";i("e99b")},a2a4:function(e,t){throw new Error("Module parse failed: Unexpected character '' (1:4)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n(Source code omitted for this binary file)")},a48c:function(e,t){throw new Error("Module parse failed: Unexpected character '' (1:4)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n(Source code omitted for this binary file)")},a5f4:function(e,t){throw new Error("Module parse failed: Unexpected character '' (1:4)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n(Source code omitted for this binary file)")},e99b:function(e,t,i){},ee84:function(e,t,i){"use strict";i("2d09")},fc33:function(e,t){throw new Error("Module parse failed: Unexpected character '' (1:4)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n(Source code omitted for this binary file)")}});