import{O as F,V as z,R as V,a as Y,S as N,W as P,C,b as B,B as j,M as D,c as q,d as y,e as G,f as W,L as M,D as b,G as E,g as T,h as Q,P as J,i as ee,j as te,k as ie,l as se,m as ae,n as re,o as le,p as ne,H as oe,q as S,r as he,A as de,s as ce,t as A,u as pe,v as ge,w as I,x as O,y as ue}from"./vendor.a32df31e.js";const me=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerpolicy&&(l.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?l.credentials="include":s.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}};me();var fe=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("router-view")},ye=[];function $(e,a,t,i,s,l,r,h){var n=typeof e=="function"?e.options:e;a&&(n.render=a,n.staticRenderFns=t,n._compiled=!0),i&&(n.functional=!0),l&&(n._scopeId="data-v-"+l);var d;if(r?(d=function(o){o=o||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!o&&typeof __VUE_SSR_CONTEXT__!="undefined"&&(o=__VUE_SSR_CONTEXT__),s&&s.call(this,o),o&&o._registeredComponents&&o._registeredComponents.add(r)},n._ssrRegister=d):s&&(d=h?function(){s.call(this,(n.functional?this.parent:this).$root.$options.shadowRoot)}:s),d)if(n.functional){n._injectStyles=d;var g=n.render;n.render=function(p,w){return d.call(w),g(p,w)}}else{var c=n.beforeCreate;n.beforeCreate=c?[].concat(c,d):[d]}return{exports:e,options:n}}const Le={},K={};var we=$(Le,fe,ye,!1,ve,null,null,null);function ve(e){for(let a in K)this[a]=K[a]}var _e=function(){return we.exports}();class He extends F{constructor(a,t){super();this.container=t,this.editorCamera=a,this.point=new z,this.dim=128,this.raycaster=new V,this.mouse=new Y,this.sceneOrtho=new N,this.rendererOrtho=new P({antialias:!0,alpha:!0}),this.rendererOrtho.setSize(128,128);const i=document.createElement("div");i.id="viewHelper",i.style.position="absolute",i.style.right="0px",i.style.bottom="0px",i.style.height="128px",i.style.width="128px",i.addEventListener("mouseup",x=>{x.stopPropagation(),x.preventDefault(),this.handleClick(x)}),i.addEventListener("mousedown",x=>{x.stopPropagation()}),i.appendChild(this.rendererOrtho.domElement),t.appendChild(i),this.panel=i;const s=new F;s.name="view_helper";const l=new C("#ff3653"),r=new C("#8adb00"),h=new C("#2c8fff"),n=[],d=4,g=4,c=new B(-d/2,d/2,g/2,-g/2,-4,4);c.position.set(0,0,0),c.lookAt(0,0,0),this.camera=c;const o=new j(.8,.05,.05).translate(.4,0,0),p=new D(o,U(l)),w=new D(o,U(r)),X=new D(o,U(h));w.rotation.z=Math.PI/2,X.rotation.y=-Math.PI/2,console.log(this,"this"),s.add(p),s.add(X),s.add(w);const v=new y(L(l,"X"));v.userData.type="posX";const _=new y(L(r,"Y"));_.userData.type="posY";const H=new y(L(h,"Z"));H.userData.type="posZ";const u=new y(L(l));u.userData.type="negX";const m=new y(L(r));m.userData.type="negY";const f=new y(L(h));f.userData.type="negZ",v.position.x=1,_.position.y=1,H.position.z=1,u.position.x=-1,u.scale.setScalar(.8),m.position.y=-1,m.scale.setScalar(.8),f.position.z=-1,f.scale.setScalar(.8),s.add(v),s.add(_),s.add(H),s.add(u),s.add(m),s.add(f),n.push(v),n.push(_),n.push(H),n.push(u),n.push(m),n.push(f),this.posXAxisHelper=v,this.posYAxisHelper=_,this.posZAxisHelper=H,this.negXAxisHelper=u,this.negYAxisHelper=m,this.negZAxisHelper=f,this.interactiveObjects=n,this.sceneOrtho.add(s)}render(a,t,i){this.quaternion.copy(this.editorCamera.quaternion).invert(),this.updateMatrixWorld();const s=this.point;s.set(0,0,1),s.applyQuaternion(this.editorCamera.quaternion),s.x>=0?(this.posXAxisHelper.material.opacity=1,this.negXAxisHelper.material.opacity=.5):(this.posXAxisHelper.material.opacity=.5,this.negXAxisHelper.material.opacity=1),s.y>=0?(this.posYAxisHelper.material.opacity=1,this.negYAxisHelper.material.opacity=.5):(this.posYAxisHelper.material.opacity=.5,this.negYAxisHelper.material.opacity=1),s.z>=0?(this.posZAxisHelper.material.opacity=1,this.negZAxisHelper.material.opacity=.5):(this.posZAxisHelper.material.opacity=.5,this.negZAxisHelper.material.opacity=1),this.camera.position.set[0],this.camera.quaternion.copy(i.quaternion),this.rendererOrtho.render(this.sceneOrtho,this.camera)}handleClick(a){this.mouse.x=a.offsetX/this.dim*2-1,this.mouse.y=-(a.offsetY/this.dim)*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);const t=this.raycaster.intersectObjects(this.interactiveObjects);if(t.length!==0)switch(t[0].object.userData.type){case"posX":console.log("posX");break;case"posY":break;case"posZ":break;case"negX":break;case"negY":break;case"negZ":break;default:console.error("ViewHelper: Invalid axis.")}}}function U(e){return new q({color:e,toneMapped:!1})}function L(e,a){const t=document.createElement("canvas");t.width=64,t.height=64;const i=t.getContext("2d");i.beginPath(),i.arc(32,32,16,0,2*Math.PI),i.closePath(),i.fillStyle=e.getStyle(),i.fill(),a&&(i.font="24px Arial",i.textAlign="center",i.fillStyle="#000000",i.fillText(a,32,41));const s=new W(t);return new G({map:s,toneMapped:!1})}const R=e=>Number.isNaN(e)?"EMPTY":e<1024?e+"b":e<1024*1024?(e/1024).toFixed(1)+"k":e<1024*1024*1024?(e/1024/1024).toFixed(1)+"M":(e/1024/1024/1024).toFixed(1)+"G",xe=(e,a)=>new Promise(async t=>{if(e.fileData.resourceType&&e.fileData.resourceType==="glb"){const i=await De({modelUrl:`${e.fileData.modelUrl}/`,fileName:e.fileData.resourceName},a);if(!i.status){t({message:"\u52A0\u8F7D\u5931\u8D25",status:!1});return}i.object.scene.name=e.fileData.resourceName,t({status:!0,object:i.object.scene});return}else if(e.fileData.type.length===1&&e.fileData.type[0]==="obj"){const i=await Ae({modelUrl:`${e.fileData.modelUrl}/`,fileName:e.fileData.resourceName},a);if(!i.status){t({message:"\u52A0\u8F7D\u5931\u8D25",status:!1});return}i.object.name=e.fileData.resourceName,t({status:!0,object:i.object});return}else if(e.fileData.type.length===2&&e.fileData.type[0]==="obj"){const i=await Se({modelUrl:`${e.fileData.modelUrl}/`,fileName:e.fileData.resourceName},a);if(!i.status){t({message:"\u52A0\u8F7D\u5931\u8D25",status:!1});return}i.object.name=e.fileData.resourceName,t({status:!0,object:i.object});return}else if(e.fileData.type[0]==="gltf"){const i=await Ce({modelUrl:`${e.fileData.modelUrl}/`,fileName:e.fileData.resourceName},a);if(!i.status){globalThis.$message.error("\u52A0\u8F7D\u5931\u8D25"),t({message:"\u52A0\u8F7D\u5931\u8D25",status:!1});return}i.object.scene.name=e.fileData.resourceName,t({status:!0,object:i.object.scene});return}else{console.log("\u6682\u4E0D\u652F\u6301"),t({message:"\u6682\u4E0D\u652F\u6301",status:!1});return}}),Se=(e,a)=>new Promise(async t=>{const i=new M(a),s=()=>{t({message:"\u52A0\u8F7D\u6A21\u578B\u5931\u8D25",status:!1})},l=r=>{let h=parseInt(r.loaded/r.total*100),n=R(r.total);a({per:h,modelSize:n})};i.addHandler(/\.dds$/i,new b),new Q(i).load(`${e.modelUrl}${e.fileName}.mtl`,r=>{r.preload(),new T(i).setMaterials(r).load(`${e.modelUrl}${e.fileName}.obj`,async h=>{t({message:"\u52A0\u8F7D\u6A21\u578B\u6210\u529F",status:!0,object:h})},l,s)})}),Ae=(e,a)=>new Promise(async t=>{const i=new M(a),s=()=>{t({message:"\u52A0\u8F7D\u6A21\u578B\u5931\u8D25",status:!1})},l=r=>{let h=parseInt(r.loaded/r.total*100),n=R(r.total);a({per:h,modelSize:n})};i.addHandler(/\.dds$/i,new b),new T(i).load(`${e.modelUrl}${e.fileName}.obj`,async r=>{t({message:"\u52A0\u8F7D\u6A21\u578B\u6210\u529F",status:!0,object:r})},l,s)}),Ce=(e,a)=>new Promise(async t=>{const i=new M(a),s=()=>{t({message:"\u52A0\u8F7D\u6A21\u578B\u5931\u8D25",status:!1})},l=r=>{let h=parseInt(r.loaded/r.total*100),n=R(r.total);a({per:h,modelSize:n})};i.addHandler(/\.dds$/i,new b),new E(i).load(`${e.modelUrl}${e.fileName}.gltf`,async r=>{t({message:"\u52A0\u8F7D\u6A21\u578B\u6210\u529F",status:!0,object:r})},l,s)}),De=(e,a)=>new Promise(async t=>{const i=new M,s=()=>{t({message:"\u52A0\u8F7D\u6A21\u578B\u5931\u8D25",status:!1})},l=r=>{let h=parseInt(r.loaded/r.total*100),n=R(r.total);a({per:h,modelSize:n})};i.addHandler(/\.dds$/i,new b),new E(i).load(`${e.modelUrl}${e.fileName}.glb`,async r=>{t({message:"\u52A0\u8F7D\u6A21\u578B\u6210\u529F",status:!0,object:r})},l,s)});class Me{constructor(a){this.container=null,this.parantDom=null,this.scene=null,this.camera=null,this.renderer=null,this.orbitcontrols=null,this.gridHelper=null,this.viewHelper=null,this.planeHelper=null,this.model=null,this.modelSize=null,this.modelLabel=null,this.LightHelper={HemisphereLightHelper:null,SpotLightHelper:null,DirectionalLightHelper_XZ:null,DirectionalLightHelper_XRZ:null,DirectionalLightHelper_RXZ:null,DirectionalLightHelper_RXRZ:null},this.Keylight={SpotLight:null},this.AuxiliaryLight={AmbientLight:null,HemisphereLight:null,DirectionalLight_XZ:null,DirectionalLight_XRZ:null,DirectionalLight_RXZ:null,DirectionalLight_RXRZ:null},this.rightMenu=a}async init(a,t,i){this.createContainer(a),this.createScene(),this.createCamera(),this.createRenderer(),this.createOrbitcontrols();const s=await this.addModel(t,i);console.log(s,"addmodelRes"),this.rightMenu.ligntUI.childrenUI.find(o=>o.id==="AuxiliaryLight").status&&this.createAuxiliaryLight(),this.rightMenu.ligntUI.childrenUI.find(o=>o.id==="Keylight").status&&this.createKeylight(),this.rightMenu.ligntUI.childrenUI.find(o=>o.id==="LightHelper").status&&this.createLightHelper(),this.rightMenu.ligntUI.childrenUI.find(o=>o.id==="Shadow").status&&this.LightShadow(!0),this.rightMenu.sceneUI.childrenUI.find(o=>o.id==="gridHelper").status&&this.createGridHelper(),this.rightMenu.sceneUI.childrenUI.find(o=>o.id==="viewHelper").status&&this.createViewHelper(),this.rightMenu.sceneUI.childrenUI.find(o=>o.id==="planeHelper").status&&this.createPlaneHelper(),window.scene=this.scene,this.animate(),this.onWindowResize()}createContainer(a){this.container=document.createElement("div"),this.container.globalAlpha=0,this.parantDom=document.querySelector(`${a}`);let t=this.parantDom.lastElementChild;for(;t;)this.parantDom.removeChild(t),t=this.parantDom.lastElementChild;this.parantDom.appendChild(this.container)}createScene(){this.scene=new N,this.scene.background=new C(2171696)}createCamera(){const a=this.parantDom.clientWidth/this.parantDom.clientHeight;this.camera=new J(50,a,1,3e4),this.camera.position.set(100,100,100),this.camera.name="Camera",this.camera.lookAt(new z(100,100,100))}createRenderer(){this.renderer=new P({antialias:!0,alpha:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.parantDom.offsetWidth,this.parantDom.offsetHeight),this.container.appendChild(this.renderer.domElement),this.renderer.shadowMapEnabled=!0,this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=ee,this.renderer.render(this.scene,this.camera),this.labelRenderer=new te,this.labelRenderer.setSize(this.parantDom.offsetWidth,this.parantDom.offsetHeight),this.labelRenderer.domElement.style.position="absolute",this.labelRenderer.domElement.style.top="0px",this.container.appendChild(this.labelRenderer.domElement)}createOrbitcontrols(){this.orbitcontrols=new ie(this.camera,this.labelRenderer.domElement),this.orbitcontrols.addEventListener("change",this.render.bind(this)),this.orbitcontrols.update()}createViewHelper(){this.viewHelper=new He(this.camera,this.container),this.scene.add(this.viewHelper)}removeViewHelper(){this.scene.remove(this.viewHelper),this.render(),document.getElementById("viewHelper").remove()}createGridHelper(){this.gridHelper=new se(300,100,4476262,2896450),this.gridHelper.position.set(0,0,-2),this.scene.add(this.gridHelper),this.rightMenu.ligntUI.childrenUI.find(t=>t.id==="Shadow").status&&this.LightShadow(!0)}removeGridHelper(){this.scene.remove(this.gridHelper)}createPlaneHelper(){let a=new j(300,1,300),t=new ae({color:4476262,side:re});this.planeHelper=new D(a,t),this.planeHelper.position.set(0,-1,0),this.scene.add(this.planeHelper),this.rightMenu.ligntUI.childrenUI.find(s=>s.id==="Shadow").status&&this.LightShadow(!0)}removePlaneHelper(){this.scene.remove(this.planeHelper)}async addModel(a,t){return new Promise(async i=>{this.model&&this.removeModel();let s=await xe(a,t);if(!s.status){i({message:s.message,status:!1});return}if(!s.object){console.log("\u8BFB\u53D6\u6A21\u578B\u5931\u8D25"),i({message:"\u8BFB\u53D6\u6A21\u578B\u5931\u8D25",status:!1});return}this.model=s.object;let l=new le().setFromObject(this.model),r=l.max.x-l.min.x,h=l.max.y-l.min.y,n=l.max.z-l.min.z,d=l.min.x+r/2,g=0,c=l.min.z+n/2;this.model.position.set(-d,-g,-c);let o=(r>n?r:n)>h?r>n?r:n:h;this.camera.updateProjectionMatrix(),this.cameraReset({x:o,y:h,z:o}),this.modelSize={x:o,y:h,z:o},this.scene.add(this.model);const p=document.createElement("div");p.className="label",p.style="color:#fff",p.textContent=this.model.name,this.modelLabel=new ne(p),this.modelLabel.position.set(0,h+1.5,0),this.model.add(this.modelLabel),i({message:"\u52A0\u8F7D\u6210\u529F",status:!0})})}removeModel(){this.model.remove(this.modelLabel),this.scene.remove(this.model)}createLightHelper(){this.AuxiliaryLight.HemisphereLight&&(this.LightHelper.HemisphereLightHelper=new oe(this.AuxiliaryLight.HemisphereLight,5),this.scene.add(this.LightHelper.HemisphereLightHelper),this.LightHelper.DirectionalLightHelper_XZ=new S(this.AuxiliaryLight.DirectionalLight_XZ,5),this.scene.add(this.LightHelper.DirectionalLightHelper_XZ),this.LightHelper.DirectionalLightHelper_XRZ=new S(this.AuxiliaryLight.DirectionalLight_XRZ,5),this.scene.add(this.LightHelper.DirectionalLightHelper_XRZ),this.LightHelper.DirectionalLightHelper_RXZ=new S(this.AuxiliaryLight.DirectionalLight_RXZ,5),this.scene.add(this.LightHelper.DirectionalLightHelper_RXZ),this.LightHelper.DirectionalLightHelper_RXRZ=new S(this.AuxiliaryLight.DirectionalLight_RXRZ,5),this.scene.add(this.LightHelper.DirectionalLightHelper_RXRZ)),this.Keylight.SpotLight&&(this.LightHelper.SpotLightHelper=new he(this.Keylight.SpotLight),this.scene.add(this.LightHelper.SpotLightHelper))}removeLightHelper(){this.LightHelper.HemisphereLightHelper&&this.scene.remove(this.LightHelper.HemisphereLightHelper),this.LightHelper.SpotLightHelper&&this.scene.remove(this.LightHelper.SpotLightHelper)}createAuxiliaryLight(){this.AuxiliaryLight.AmbientLight=new de(6710886,1.5),this.AuxiliaryLight.HemisphereLight=new ce(16777215,0,.5),this.AuxiliaryLight.DirectionalLight_XZ=new A(16777215,.1),this.AuxiliaryLight.DirectionalLight_XRZ=new A(16777215,.1),this.AuxiliaryLight.DirectionalLight_RXZ=new A(16777215,.1),this.AuxiliaryLight.DirectionalLight_RXRZ=new A(16777215,.1),this.updateLight(),this.rightMenu.ligntUI.childrenUI.find(t=>t.id==="Shadow").status&&this.LightShadow(!0),this.scene.add(this.AuxiliaryLight.AmbientLight),this.scene.add(this.AuxiliaryLight.HemisphereLight),this.scene.add(this.AuxiliaryLight.DirectionalLight_XZ),this.scene.add(this.AuxiliaryLight.DirectionalLight_XRZ),this.scene.add(this.AuxiliaryLight.DirectionalLight_RXZ),this.scene.add(this.AuxiliaryLight.DirectionalLight_RXRZ)}removeAuxiliaryLight(){this.scene.remove(this.AuxiliaryLight.AmbientLight),this.scene.remove(this.AuxiliaryLight.HemisphereLight)}createKeylight(){this.Keylight.SpotLight=new pe(16777215),this.Keylight.SpotLight.position.set(17,45,27),this.Keylight.SpotLight.castShadow=!0,this.Keylight.SpotLight.intensity=2,this.Keylight.SpotLight.angle=Math.PI/10,this.Keylight.SpotLight.distance=1e3,this.Keylight.SpotLight.exponent=1,this.Keylight.SpotLight.decay=1.5,this.Keylight.SpotLight.penumbra=.7,this.updateLight(),this.rightMenu.ligntUI.childrenUI.find(t=>t.id==="Shadow").status&&this.LightShadow(!0),this.scene.add(this.Keylight.SpotLight)}removeKeylight(){this.scene.remove(this.Keylight.SpotLight),this.scene.remove(this.Keylight.DirectionalLight)}updateLight(a){let t=this.modelSize?this.modelSize.x*1:0,i=this.modelSize?this.modelSize.y*1:0,s=this.modelSize?this.modelSize.z*1:0;this.AuxiliaryLight&&(this.AuxiliaryLight.AmbientLight.position.set(0,i*1.5,0),this.AuxiliaryLight.HemisphereLight.position.set(0,i*1.5,0),this.AuxiliaryLight.DirectionalLight_XZ.position.set(t*1.5,i*.35,s*1.5),this.AuxiliaryLight.DirectionalLight_XRZ.position.set(t*1.5,i*.35,-s*1.5),this.AuxiliaryLight.DirectionalLight_RXZ.position.set(-t*1.5,i*.35,s*1.5),this.AuxiliaryLight.DirectionalLight_RXRZ.position.set(-t*1.5,i*.35,-s*1.5)),this.Keylight.SpotLight&&(this.Keylight.SpotLight.position.set(t?t+40:17,i?i*3:45,s?s+40:27),this.Keylight.SpotLight.target=this.model)}LightShadow(a){let t=!!a;if(console.log(t,t?"\u5F00\u542F\u9634\u5F71":"\u5173\u95ED\u9634\u5F71"),this.Keylight.SpotLight){console.log(t,"\u4E3B\u706F\u5149\u9634\u5F71"),this.Keylight.SpotLight.castShadow=t,this.Keylight.SpotLight.receiveShadow=t,this.Keylight.SpotLight.shadow.mapSize.width=512,this.Keylight.SpotLight.shadow.mapSize.height=512,this.Keylight.SpotLight.shadow.radius=1,this.Keylight.SpotLight.shadow.camera.near=20,this.Keylight.SpotLight.shadow.camera.far=5e4,this.Keylight.SpotLight.shadow.fov=10,this.Keylight.SpotLight.shadow.focus=1;var i=new ge(this.Keylight.SpotLight.shadow.camera);i.visible=!0,this.scene.add(i)}let s=l=>{l.children&&l.children.forEach(r=>{r.type==="Mesh"&&(r.castShadow=t),r.children&&r.children.length>0&&s(r)})};this.model&&s(this.model),this.planeHelper&&(console.log(t,"planeHelper\u9634\u5F71"),this.planeHelper.receiveShadow=t),this.gridHelper&&(console.log(t,"gridHelper\u9634\u5F71"),this.gridHelper.receiveShadow=t)}render(){this.renderer.clear(),this.renderer.render(this.scene,this.camera),this.viewHelper&&this.viewHelper.render(this.renderer,this.scene,this.camera),this.labelRenderer.render(this.scene,this.camera)}cameraReset(a){this.camera.position.set(a.x,a.y,a.z),this.orbitcontrols.target.set(0,0,0),this.orbitcontrols.update(),this.animate()}onWindowResize(){this.camera.aspect=this.parantDom.offsetWidth/this.parantDom.offsetHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.parantDom.offsetWidth,this.parantDom.offsetHeight)}animate(){requestAnimationFrame(this.animate.bind(this)),this.render()}}var be=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"modelviewer"},[t("div",{staticClass:"centent"},[t("div",{ref:"modelviewerMain",staticClass:"main"},[e.modelLoader_show?t("div",{staticClass:"progress"},[t("div",{staticClass:"loader",style:{width:e.modelLoader_progress+"%"}}),t("div",{staticClass:"text"},[e._v(e._s(e.modelLoader_text))])]):e._e(),t("div",{staticClass:"toolMenu"},[t("div",{staticClass:"header"},[t("div",{staticClass:"header_left"},[e.model?t("div",{staticClass:"header_left_title"},[e._v(" "+e._s(e.model.fileData.resourceName)+" - ")]):e._e(),t("div",{staticClass:"header_left_text"},[e._v("3D \u67E5\u770B\u5668")])]),t("div",{staticClass:"header_right"},[t("a-icon",{staticClass:"header_right_icon",attrs:{type:"zoom-in"},on:{click:function(){e.console.log("\u5168\u5C4F")}}}),t("a-icon",{staticClass:"header_right_icon",attrs:{type:"close"},on:{click:function(){e.$emit("close")}}})],1)]),t("div",{staticClass:"tools"},e._l(e.toolMenu,function(i){return t("div",{key:i.id,staticClass:"tool"},[t("a-dropdown",{attrs:{trigger:["click"],overlayClassName:"overlayClassName"}},[t("span",{staticClass:"toolTitle"},[e._v(e._s(i.name))]),t("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},e._l(i.children,function(s){return t("a-menu-item",{key:s.id},[t("span",{staticClass:"toolTitle"},[t("a-icon",{attrs:{type:s.icon}}),e._v(" "+e._s(s.name)+" ")],1)])}),1)],1)],1)}),0)]),t("div",{staticClass:"view",staticStyle:{display:"flex"}},[e.getUIHelperFlag("toolUI","modelChildListHelper")?t("div",{staticClass:"childList"},[e._v(" \u5B50\u96C6 ")]):e._e(),t("div",{staticClass:"iframebox",attrs:{id:"ModelViewerBox"}}),t("div",{staticClass:"rightMenu",style:{height:e.rightMenuHeight+"px"}},[t("a-collapse",{model:{value:e.activeKey,callback:function(i){e.activeKey=i},expression:"activeKey"}},[t("a-collapse-panel",{attrs:{header:e.rightMenu.environmentUI.name}},[t("a-row",e._l(e.rightMenu.environmentUI.datalist,function(i){return t("a-col",{key:i.id,attrs:{span:8}},[t("div",{staticClass:"colorBox",staticStyle:{width:"40px",height:"40px"},style:{backgroundColor:i.color}})])}),1)],1),t("a-collapse-panel",{attrs:{header:e.rightMenu.ligntUI.name}},[t("div",{staticClass:"lightSet"},e._l(e.rightMenu.ligntUI.childrenUI,function(i){return t("div",{key:i.id,staticClass:"helperItem",class:i.id},[t("span",[e._v(e._s(i.name))]),t("a-switch",{attrs:{"checked-children":"\u5F00","un-checked-children":"\u5173",defaultChecked:i.status},on:{change:function(s){return e.lightUIApi(i)}}})],1)}),0)]),t("a-collapse-panel",{attrs:{header:e.rightMenu.sceneUI.name}},[t("div",{staticClass:"sceneSet"},e._l(e.rightMenu.sceneUI.childrenUI,function(i){return t("div",{key:i.id,staticClass:"helperItem",class:i.id},[t("span",[e._v(e._s(i.name))]),t("a-switch",{attrs:{"checked-children":"\u5F00","un-checked-children":"\u5173",defaultChecked:i.status},on:{change:function(s){return e.sceneUIApi(i)}}})],1)}),0)]),t("a-collapse-panel",{attrs:{header:e.rightMenu.toolUI.name}},[t("div",{staticClass:"toolSet"},e._l(e.rightMenu.toolUI.childrenUI,function(i){return t("div",{key:i.id,staticClass:"helperItem",class:i.id},[t("span",[e._v(e._s(i.name))]),t("a-switch",{attrs:{"checked-children":"\u5F00","un-checked-children":"\u5173",defaultChecked:i.status},on:{change:function(s){return e.toolUIApi(i)}}})],1)}),0)])],1)],1)]),t("div",{staticClass:"footer"},[t("div",{staticClass:"animation"},[t("div",{staticClass:"play animationBtn"},[t("a-icon",{attrs:{type:"play-square"}})],1),t("div",{staticClass:"play animationBtn"},[t("a-icon",{attrs:{type:"sync"}})],1),t("div",{staticClass:"animationLine"},[t("a-slider",{attrs:{id:"test","default-value":30,disabled:!1}})],1)]),t("div",{staticClass:"tool"},[t("a-dropdown",{attrs:{trigger:["click"],overlayClassName:"overlayClassName"}},[t("span",{staticClass:"toolTitle"},[t("a-icon",{attrs:{type:"up-square"}}),e._v(" \u5FEB\u901F\u52A8\u753B"),t("a-icon",{attrs:{type:"up"}})],1),t("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[t("a-menu-item",[t("span",{staticClass:"toolTitle"},[t("a-icon",{attrs:{type:"desktop"}}),e._v(" \u65E0 ")],1)]),t("a-menu-item",[t("span",{staticClass:"toolTitle"},[t("a-icon",{attrs:{type:"desktop"}}),e._v(" \u8F6C\u76D8 ")],1)])],1)],1),t("a-dropdown",{attrs:{trigger:["click"],overlayClassName:"overlayClassName"}},[t("span",{staticClass:"toolTitle"},[t("a-icon",{staticStyle:{"font-size":"10px"},attrs:{type:"close"}}),e._v(" 1.0"),t("a-icon",{attrs:{type:"up"}})],1),t("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[t("a-menu-item",[t("span",{staticClass:"toolTitle"},[t("a-icon",{staticStyle:{"font-size":"10px"},attrs:{type:"close"}}),e._v(" 1.0 ")],1)]),t("a-menu-item",[t("span",{staticClass:"toolTitle"},[t("a-icon",{staticStyle:{"font-size":"10px"},attrs:{type:"close"}}),e._v(" 2.0 ")],1)])],1)],1)],1)])])])])},Re=[];const Ue={name:"Modelviewer",props:["model"],data(){return{visible:!0,modelLoader_progress:0,modelLoader_show:!1,modelLoader_text:"",toolMenu:[{id:"file",name:"\u6587\u4EF6",children:[{id:"export",name:"\u5BFC\u51FA",icon:"download"},{id:"screenshot",name:"\u622A\u56FE",icon:"picture"}]},{id:"edit",name:"\u7F16\u8F91",children:[{id:"disassemble",name:"\u62C6\u89E3",icon:"unlock"}]},{id:"tool",name:"\u5DE5\u5177",children:[{id:"statistics",name:"\u7EDF\u8BA1\u4FE1\u606F",icon:"file-search"},{id:"sectioning",name:"\u5256\u5207",icon:"to-top"}]},{id:"viewer",name:"\u67E5\u770B",children:[{id:"blast",name:"\u7206\u70B8",icon:"global"},{id:"measure",name:"\u6D4B\u91CF",icon:"gateway"},{id:"ResetCamera",name:"\u91CD\u7F6E\u76F8\u673A",icon:"cloud-sync"}]}],rightMenu:{environmentUI:{name:"\u73AF\u5883\u8BBE\u7F6E",datalist:[{id:1,color:"#ccc"},{id:2,color:"#FF4400"},{id:3,color:"#000000"},{id:4,color:"#FFF9AD"},{id:5,color:"#97C7C9"},{id:6,color:"#FF9000"}]},ligntUI:{id:"ligntUI",name:"\u706F\u5149\u8BBE\u7F6E",childrenUI:[{id:"LightHelper",name:"\u706F\u5149\u8F85\u52A9\u5668",status:!0},{id:"AuxiliaryLight",name:"\u8F85\u52A9\u706F\u5149",status:!0},{id:"Keylight",name:"\u4E3B\u706F\u5149",status:!0},{id:"Shadow",name:"\u9634\u5F71",status:!0}]},sceneUI:{id:"sceneUI",name:"\u573A\u666F\u63A7\u4EF6",childrenUI:[{id:"gridHelper",name:"\u7F51\u683C\u8F85\u52A9",status:!1},{id:"viewHelper",name:"\u5750\u6807\u8F85\u52A9",status:!0},{id:"planeHelper",name:"\u5E73\u9762\u8F85\u52A9",status:!0}]},toolUI:{id:"toolUI",name:"\u5DE5\u5177\u63A7\u4EF6",childrenUI:[{id:"modelChildListHelper",name:"\u6A21\u578B\u5C42\u7EA7",status:!1}]}},activeKey:[],RenderModelApi:null,rightMenuHeight:0}},watch:{activeKey(e){}},async mounted(){this.rightMenuHeight=this.$refs.modelviewerMain.clientHeight-80-50,this.RenderModelApi=new Me(this.rightMenu),this.RenderModelApi.init("#ModelViewerBox",this.model,this.loaderModel)},methods:{loaderModel(e){console.log(e,"\u6A21\u578B\u52A0\u8F7D"),!!e&&(this.modelLoader_progress=e.per,this.modelLoader_text=`\u52A0\u8F7D\u4E2D\u2026\u2026 \u6587\u4EF6\u5927\u5C0F\uFF1A${e.modelSize}`,e.per===100&&(this.modelLoader_show=!1))},lightUIApi(e){if(console.log(e,"\u706F\u5149\u8BBE\u7F6E"),e.status=!e.status,!this.RenderModelApi.model){this.$message.warning("\u8BF7\u9009\u62E9\u6A21\u578B");return}if(e.id==="LightHelper"){e.status?this.RenderModelApi.createLightHelper():this.RenderModelApi.removeLightHelper();return}if(e.id==="AuxiliaryLight"){e.status?this.RenderModelApi.createAuxiliaryLight():this.RenderModelApi.removeAuxiliaryLight();return}if(e.id==="Keylight"){e.status?this.RenderModelApi.createKeylight():this.RenderModelApi.removeKeylight();return}if(e.id==="Shadow"){e.status?this.RenderModelApi.LightShadow(!0):this.RenderModelApi.LightShadow(!1);return}},sceneUIApi(e){if(console.log(e,"\u573A\u666F\u8BBE\u7F6E"),e.status=!e.status,!this.RenderModelApi.model){this.$message.warning("\u8BF7\u9009\u62E9\u6A21\u578B");return}e.id==="gridHelper"&&(e.status?this.RenderModelApi.createGridHelper():this.RenderModelApi.removeGridHelper()),e.id==="viewHelper"&&(e.status?this.RenderModelApi.createViewHelper():this.RenderModelApi.removeViewHelper()),e.id==="planeHelper"&&(e.status?this.RenderModelApi.createPlaneHelper():this.RenderModelApi.removePlaneHelper())},toolUIApi(e){console.log(e,"\u573A\u666F\u8BBE\u7F6E"),e.status=!e.status,e.id==="modelChildListHelper"},getUIHelperFlag(e,a){return this.rightMenu[e].childrenUI.find(t=>t.id===a).status}}},Z={};var Ie=$(Ue,be,Re,!1,$e,"2db268e8",null,null);function $e(e){for(let a in Z)this[a]=Z[a]}var Xe=function(){return Ie.exports}(),Fe=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"home"},[t("div",{staticClass:"header"},[e._v("\u6A21\u578B\u67E5\u770B\u5668\u5C55\u793A")]),t("div",{staticClass:"modelList"},[t("div",{staticClass:"title"},[e._v("\u6A21\u578B\u5217\u8868")]),t("div",{staticClass:"models"},e._l(e.modellist,function(i){return t("span",{key:i.id,staticClass:"model",on:{click:function(s){return e.renderModel(i)}}},[e._v(e._s(i.fileData.resourceName))])}),0)]),e.modalViewerFlag?t("modelviewer",{ref:"modelviewerCom",attrs:{model:e.model},on:{close:function(){e.modalViewerFlag=!1}}}):e._e()],1)},Ke=[];const Ze={name:"home",data(){return{modalViewerFlag:!1,model:null,modellist:[{id:1,fileData:{modelUrl:"http://113.57.121.225:3002/model/5/\u6A21\u578B\u5206\u7C7B/SMT/ACU\u63A7\u5236\u7BB1",resourceType:"",resourceName:"ACU\u63A7\u5236\u7BB1",type:["obj","mtl"]}},{id:2,fileData:{modelUrl:"./static/models/fangzi",resourceType:"glb",resourceName:"fangzi",type:["glb"]}},{id:3,fileData:{modelUrl:"./static/models/zuozi",resourceType:"glb",resourceName:"zuozi",type:["glb"]}}]}},components:{modelviewer:Xe},methods:{renderModel(e){this.modalViewerFlag=!0,this.model=e}}},k={};var ke=$(Ze,Fe,Ke,!1,ze,"505abc28",null,null);function ze(e){for(let a in k)this[a]=k[a]}var Ne=function(){return ke.exports}();I.use(O);const Pe=[{path:"/",redirect:"/home"},{path:"/home",component:Ne,name:"Home",children:[]}],je=new O({mode:"hash",routes:Pe});I.use(ue);new I({router:je,render:e=>e(_e)}).$mount("#app");
